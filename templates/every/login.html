<!DOCTYPE html>
<html>
<head>
    <title>Login Page</title>
</head>
<body>
    <h2>Login</h2>
    <div id="error-message" style="color: red;"></div> <!-- 오류 메시지 표시를 위한 div -->
    <form id="login-form">
        <label for="id">ID:</label>  
        <input type="text" id="id" name="id" required><br><br>
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required><br><br>
        <button type="submit">Login</button>
    </form>
    <form id="logout-form">
        <button type="submit">Logout</button>
    </form>

    <script>
        // 로그인 폼 제출 시 실행되는 함수
        document.getElementById('login-form').addEventListener('submit', function(event) {
            event.preventDefault(); // 기본 동작(페이지 이동) 방지

            // 사용자가 입력한 ID와 비밀번호를 가져옴
            var id = document.getElementById('id').value;
            var password = document.getElementById('password').value;

            // JSON 데이터 생성
            var jsonData = JSON.stringify({id: id, password: password});

            // POST 요청을 보내기 위해 XMLHttpRequest 객체 생성
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/every/account/login_info/', true);
            xhr.setRequestHeader('Content-Type', 'application/json'); // JSON 데이터 타입 설정


            // 요청 전송
            xhr.send(jsonData);
        });

        // 로그아웃 폼 제출 시 실행되는 함수
        document.getElementById('logout-form').addEventListener('submit', function(event) {
            event.preventDefault(); // 기본 동작(페이지 이동) 방지

            // POST 요청을 보내기 위해 XMLHttpRequest 객체 생성
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/every/account/logout/', true);

            // POST 요청 완료 시 실행되는 콜백 함수
            xhr.onload = function() {
                if (xhr.status === 200) {
                    // 로그아웃 성공 시 페이지 새로고침
                    window.location.reload();
                } else {
                    // 오류 메시지 표시
                    document.getElementById('error-message').innerText = '로그아웃에 실패했습니다.';
                }
            };

            // 요청 전송
            xhr.send();
        });
    </script>
</body>
</html>
